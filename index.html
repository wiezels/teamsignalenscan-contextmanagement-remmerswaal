<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teamsignalen Scan â€” Contextmanagement</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Fraunces:wght@400;700&family=Outfit:wght@300;400;500&display=swap');

  :root {
    --groep:      #2b4162;
    --persoonlijk:#7a3b1e;
    --ondergrens: #2d6a4f;
    --afhankelijk:#5c3d7a;
    --bg:         #f7f4ef;
    --card:       #fffefb;
    --text:       #1a1714;
    --muted:      #807870;
    --border:     #e0dbd0;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Outfit', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
  }

  /* HEADER */
  header {
    background: var(--text);
    color: var(--bg);
    padding: 3rem 2rem 2.8rem;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  header::before {
    content: '';
    position: absolute;
    top: -80px; right: -60px;
    width: 280px; height: 280px;
    border-radius: 50%;
    background: rgba(255,255,255,0.03);
  }
  header h1 {
    font-family: 'Fraunces', serif;
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 700;
    letter-spacing: -1px;
    margin-bottom: 0.6rem;
  }
  header p {
    font-weight: 300;
    font-size: 1rem;
    opacity: 0.65;
    max-width: 520px;
    margin: 0 auto;
    line-height: 1.6;
  }
  .model-tag {
    display: inline-block;
    margin-top: 1rem;
    border: 1px solid rgba(255,255,255,0.25);
    border-radius: 100px;
    padding: 0.25rem 1rem;
    font-size: 0.75rem;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    opacity: 0.6;
  }

  /* META */
  .meta-section {
    max-width: 820px;
    margin: 2.5rem auto 0;
    padding: 0 1.5rem;
  }
  .meta-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 1.8rem 2rem;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.2rem 2rem;
  }
  @media(max-width: 560px) { .meta-card { grid-template-columns: 1fr; } }
  .meta-card label {
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--muted);
    display: block;
    margin-bottom: 0.4rem;
  }
  .meta-card input, .meta-card select {
    width: 100%;
    border: 1.5px solid var(--border);
    background: var(--bg);
    border-radius: 7px;
    padding: 0.6rem 0.85rem;
    font-family: 'Outfit', sans-serif;
    font-size: 0.95rem;
    color: var(--text);
    outline: none;
    transition: border-color 0.2s;
  }
  .meta-card input:focus, .meta-card select:focus { border-color: var(--text); }

  /* MODEL INTRO */
  .model-intro {
    max-width: 820px;
    margin: 2rem auto;
    padding: 0 1.5rem;
  }
  .model-intro h2 {
    font-family: 'Fraunces', serif;
    font-size: 1.1rem;
    margin-bottom: 1rem;
    color: var(--muted);
    font-weight: 400;
    letter-spacing: 0.02em;
  }
  .quadrant-legend {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.9rem;
  }
  @media(max-width: 500px) { .quadrant-legend { grid-template-columns: 1fr; } }
  .legend-item {
    border-radius: 12px;
    padding: 1.1rem 1.3rem;
    color: white;
    font-size: 0.86rem;
    line-height: 1.55;
  }
  .legend-item strong { display: block; font-size: 0.98rem; margin-bottom: 0.25rem; font-weight: 500; }
  .legend-item.groep       { background: var(--groep); }
  .legend-item.persoonlijk { background: var(--persoonlijk); }
  .legend-item.ondergrens  { background: var(--ondergrens); }
  .legend-item.afhankelijk { background: var(--afhankelijk); }

  /* SCAN */
  .scan-container {
    max-width: 820px;
    margin: 0 auto 2rem;
    padding: 0 1.5rem;
  }
  .scan-instruction {
    font-size: 0.87rem;
    color: var(--muted);
    line-height: 1.7;
    margin-bottom: 1.8rem;
    padding: 1rem 1.2rem;
    border-left: 3px solid var(--border);
    background: var(--card);
    border-radius: 0 8px 8px 0;
  }

  .quadrant-section {
    margin-bottom: 2.5rem;
    border-radius: 16px;
    overflow: hidden;
    border: 1px solid var(--border);
    background: var(--card);
    box-shadow: 0 2px 12px rgba(0,0,0,0.04);
  }
  .quadrant-header {
    padding: 1.3rem 2rem;
    color: white;
    display: flex;
    align-items: flex-start;
    gap: 1.1rem;
  }
  .quadrant-header.groep       { background: var(--groep); }
  .quadrant-header.persoonlijk { background: var(--persoonlijk); }
  .quadrant-header.ondergrens  { background: var(--ondergrens); }
  .quadrant-header.afhankelijk { background: var(--afhankelijk); }

  .q-icon { font-size: 1.8rem; line-height: 1; margin-top: 0.1rem; }
  .q-title { font-family: 'Fraunces', serif; font-size: 1.3rem; font-weight: 700; line-height: 1.2; }
  .q-sub { font-size: 0.82rem; opacity: 0.8; margin-top: 0.2rem; font-weight: 300; line-height: 1.4; }

  /* SIGNAL badges */
  .signal-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    padding: 0.9rem 2rem;
    background: rgba(0,0,0,0.03);
    border-bottom: 1px solid var(--border);
  }
  .signal-tag {
    font-size: 0.73rem;
    border-radius: 100px;
    padding: 0.2rem 0.75rem;
    font-weight: 500;
    opacity: 0.85;
    color: white;
  }
  .groep .signal-tag       { background: var(--groep); }
  .persoonlijk .signal-tag { background: var(--persoonlijk); }
  .ondergrens .signal-tag  { background: var(--ondergrens); }
  .afhankelijk .signal-tag { background: var(--afhankelijk); }

  .questions-list {
    padding: 1.6rem 2rem;
    display: flex;
    flex-direction: column;
    gap: 1.6rem;
  }

  .question-item label.qlabel {
    display: block;
    font-size: 0.95rem;
    font-weight: 400;
    margin-bottom: 0.8rem;
    line-height: 1.5;
    color: var(--text);
  }
  .q-num {
    display: block;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--muted);
    margin-bottom: 0.25rem;
    font-weight: 500;
  }

  /* LIKERT */
  .likert { display: flex; gap: 0.5rem; }
  .likert input[type="radio"] { display: none; }
  .likert label {
    flex: 1;
    text-align: center;
    padding: 0.6rem 0.2rem;
    border: 1.5px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--muted);
    background: var(--bg);
    transition: all 0.15s;
    margin-bottom: 0;
    line-height: 1.3;
    user-select: none;
  }
  .likert label:hover { border-color: var(--text); color: var(--text); }
  .likert input:checked + label { color: white; border-color: transparent; }

  [data-q="groep"]       .likert input:checked + label { background: var(--groep); }
  [data-q="persoonlijk"] .likert input:checked + label { background: var(--persoonlijk); }
  [data-q="ondergrens"]  .likert input:checked + label { background: var(--ondergrens); }
  [data-q="afhankelijk"] .likert input:checked + label { background: var(--afhankelijk); }

  .likert-ends {
    display: flex;
    justify-content: space-between;
    font-size: 0.68rem;
    color: var(--muted);
    margin-top: 0.3rem;
    padding: 0 0.2rem;
  }

  textarea.open-q {
    width: 100%;
    border: 1.5px solid var(--border);
    background: var(--bg);
    border-radius: 8px;
    padding: 0.8rem 1rem;
    font-family: 'Outfit', sans-serif;
    font-size: 0.92rem;
    color: var(--text);
    resize: vertical;
    min-height: 84px;
    outline: none;
    transition: border-color 0.2s;
    line-height: 1.5;
  }
  textarea.open-q:focus { border-color: var(--text); }

  .divider { border: none; border-top: 1px solid var(--border); margin: 0; }

  /* PROGRESS */
  .progress-sticky {
    position: sticky;
    top: 0;
    z-index: 20;
    background: var(--bg);
    border-bottom: 1px solid var(--border);
    padding: 0.55rem 1.5rem;
  }
  .progress-inner {
    max-width: 820px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  .progress-track {
    flex: 1;
    background: var(--border);
    border-radius: 100px;
    height: 4px;
  }
  .progress-fill {
    height: 4px;
    border-radius: 100px;
    background: var(--text);
    transition: width 0.3s ease;
    width: 0%;
  }
  .progress-label { font-size: 0.76rem; color: var(--muted); white-space: nowrap; }

  /* SUBMIT */
  .submit-area {
    max-width: 820px;
    margin: 0 auto 4rem;
    padding: 0 1.5rem;
    text-align: center;
  }
  .submit-hint { font-size: 0.83rem; color: var(--muted); margin-bottom: 1rem; }
  .btn-submit {
    background: var(--text);
    color: var(--bg);
    font-family: 'Outfit', sans-serif;
    font-size: 1rem;
    font-weight: 500;
    padding: 0.9rem 2.6rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    letter-spacing: 0.02em;
    transition: opacity 0.2s, transform 0.1s;
  }
  .btn-submit:hover { opacity: 0.82; transform: translateY(-1px); }
  .btn-submit:active { transform: translateY(0); }

  /* RESULTS */
  #results { display: none; max-width: 820px; margin: 0 auto 4rem; padding: 0 1.5rem; }
  .results-header { text-align: center; margin-bottom: 0.4rem; }
  .results-header h2 {
    font-family: 'Fraunces', serif;
    font-size: 2rem;
    font-weight: 700;
  }
  .result-meta { text-align: center; color: var(--muted); font-size: 0.88rem; margin-bottom: 2.2rem; }

  .result-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }
  @media(max-width: 500px) { .result-grid { grid-template-columns: 1fr; } }

  .result-card {
    border-radius: 14px;
    padding: 1.5rem 1.6rem 1.3rem;
    color: white;
    position: relative;
    overflow: hidden;
  }
  .result-card::after {
    content: '';
    position: absolute;
    bottom: -30px; right: -30px;
    width: 120px; height: 120px;
    border-radius: 50%;
    background: rgba(255,255,255,0.07);
  }
  .result-card.groep       { background: var(--groep); }
  .result-card.persoonlijk { background: var(--persoonlijk); }
  .result-card.ondergrens  { background: var(--ondergrens); }
  .result-card.afhankelijk { background: var(--afhankelijk); }

  .result-card h3 { font-family: 'Fraunces', serif; font-size: 1.05rem; margin-bottom: 0.9rem; }
  .score-bar-bg { background: rgba(255,255,255,0.25); border-radius: 100px; height: 7px; margin-bottom: 0.55rem; }
  .score-bar-fill { height: 7px; border-radius: 100px; background: white; transition: width 1s cubic-bezier(0.4,0,0.2,1); }
  .score-num { font-size: 2rem; font-weight: 700; line-height: 1; }
  .score-max { font-size: 0.8rem; opacity: 0.65; }
  .attention-pill {
    display: inline-block;
    background: rgba(255,255,255,0.22);
    border-radius: 100px;
    padding: 0.2rem 0.8rem;
    font-size: 0.71rem;
    font-weight: 500;
    margin-top: 0.7rem;
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }

  /* RADAR */
  .radar-wrap {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 1.6rem;
    text-align: center;
    margin-bottom: 1.5rem;
  }
  .radar-wrap h3 {
    font-family: 'Fraunces', serif;
    font-size: 1.05rem;
    color: var(--text);
    margin-bottom: 1.1rem;
    font-weight: 400;
  }
  canvas#radarChart { max-width: 300px; margin: 0 auto; display: block; }

  /* ADVICE */
  .advice-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 1.6rem 2rem;
    margin-bottom: 1.5rem;
  }
  .advice-section h3 {
    font-family: 'Fraunces', serif;
    font-size: 1.1rem;
    margin-bottom: 1.2rem;
    font-weight: 700;
  }
  .advice-item {
    border-left: 3px solid;
    padding: 0.7rem 0 0.7rem 1.1rem;
    margin-bottom: 1rem;
    font-size: 0.9rem;
    line-height: 1.6;
  }
  .advice-item:last-child { margin-bottom: 0; }
  .advice-item.groep       { border-color: var(--groep); }
  .advice-item.persoonlijk { border-color: var(--persoonlijk); }
  .advice-item.ondergrens  { border-color: var(--ondergrens); }
  .advice-item.afhankelijk { border-color: var(--afhankelijk); }
  .advice-item strong {
    display: block;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.07em;
    color: var(--muted);
    margin-bottom: 0.3rem;
  }

  /* OPEN ANSWERS */
  .open-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 1.6rem 2rem;
    margin-bottom: 1.5rem;
  }
  .open-section h3 { font-family: 'Fraunces', serif; font-size: 1.05rem; margin-bottom: 1rem; font-weight: 400; color: var(--muted); }
  .open-answer { margin-bottom: 1rem; font-size: 0.88rem; line-height: 1.6; }
  .open-answer:last-child { margin-bottom: 0; }
  .open-answer strong { display: block; font-size: 0.74rem; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted); margin-bottom: 0.2rem; }
  .open-answer p { color: var(--text); }
  .open-answer p.empty { color: var(--border); font-style: italic; }

  .btn-reset {
    display: block;
    margin: 1.5rem auto 0;
    background: transparent;
    border: 1.5px solid var(--border);
    color: var(--muted);
    font-family: 'Outfit', sans-serif;
    font-size: 0.88rem;
    padding: 0.65rem 1.5rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
  }
  .btn-reset:hover { border-color: var(--text); color: var(--text); }
</style>
</head>
<body>

<header>
  <h1>Teamsignalen Scan</h1>
  <p>Wat speelt er in ons team? Vul individueel in en breng samen in beeld waar aandacht nodig is.</p>
  <span class="model-tag">Contextmanagement Â· Remmerswaal</span>
</header>

<div class="progress-sticky" id="progressBar" style="display:none">
  <div class="progress-inner">
    <div class="progress-track"><div class="progress-fill" id="progressFill"></div></div>
    <span class="progress-label" id="progressLabel">0 / 20 ingevuld</span>
  </div>
</div>

<!-- META -->
<div class="meta-section">
  <div class="meta-card">
    <div>
      <label>Naam (optioneel)</label>
      <input type="text" id="name" placeholder="Voornaam of anoniem">
    </div>
    <div>
      <label>Team / afdeling</label>
      <input type="text" id="team" placeholder="Bijv. Projectteam Alpha">
    </div>
    <div>
      <label>Datum</label>
      <input type="date" id="scandate">
    </div>
    <div>
      <label>Rol</label>
      <select id="role">
        <option value="">Selecteer...</option>
        <option>Teamlid</option>
        <option>Teamleider / leidinggevende</option>
        <option>Projectleider</option>
        <option>Coach / begeleider</option>
        <option>Anders</option>
      </select>
    </div>
  </div>
</div>

<!-- MODEL INTRO -->
<div class="model-intro">
  <h2>De vier kwadranten van Contextmanagement</h2>
  <div class="quadrant-legend">
    <div class="legend-item groep">
      <strong>ðŸ«‚ Identificatie met de groep</strong>
      In hoeverre voelen teamleden zich onderdeel van het team? Is er een gezamenlijke identiteit en gedeeld doel?
    </div>
    <div class="legend-item persoonlijk">
      <strong>ðŸŽ¯ Persoonlijke belangen</strong>
      Hoeveel ruimte is er voor ieders eigen behoeften, ambities en drijfveren? Worden individuele belangen erkend?
    </div>
    <div class="legend-item ondergrens">
      <strong>ðŸ›‘ Ondergrens bewaken</strong>
      Zijn er heldere grenzen over wat niet acceptabel is? Worden grensoverschrijdingen benoemd en aangepakt?
    </div>
    <div class="legend-item afhankelijk">
      <strong>ðŸ”— Afhankelijkheid van elkaar</strong>
      In hoeverre hebben teamleden elkaar nodig? Wordt die wederzijdse afhankelijkheid erkend en productief gemaakt?
    </div>
  </div>
</div>

<!-- SCAN FORM -->
<div class="scan-container" id="scanForm">
  <p class="scan-instruction">
    Geef bij elke stelling aan hoe je dit ervaart in jouw team. Gebruik de schaal van <strong>1 (helemaal niet van toepassing)</strong> tot <strong>5 (volledig van toepassing)</strong>. Er zijn geen goede of foute antwoorden â€” jouw eerlijke beleving telt.
  </p>

  <!-- KWADRANT 1: IDENTIFICATIE MET DE GROEP -->
  <div class="quadrant-section" data-q="groep">
    <div class="quadrant-header groep">
      <span class="q-icon">ðŸ«‚</span>
      <div>
        <div class="q-title">Identificatie met de groep</div>
        <div class="q-sub">Groepsgevoel Â· gedeeld doel Â· erbij horen</div>
      </div>
    </div>
    <div class="signal-tags groep">
      <span class="signal-tag">Wij-gevoel</span>
      <span class="signal-tag">Gezamenlijk doel</span>
      <span class="signal-tag">Trots op het team</span>
      <span class="signal-tag">Erbij horen</span>
    </div>
    <div class="questions-list">

      <div class="question-item" data-q="groep">
        <label class="qlabel"><span class="q-num">G-1</span>Ik voel me verbonden met de koers en het doel van dit team.</label>
        <div class="likert" id="g1">
          <input type="radio" name="g1" id="g1_1" value="1"><label for="g1_1">1<br><small>Niet</small></label>
          <input type="radio" name="g1" id="g1_2" value="2"><label for="g1_2">2</label>
          <input type="radio" name="g1" id="g1_3" value="3"><label for="g1_3">3<br><small>Soms</small></label>
          <input type="radio" name="g1" id="g1_4" value="4"><label for="g1_4">4</label>
          <input type="radio" name="g1" id="g1_5" value="5"><label for="g1_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="groep">
        <label class="qlabel"><span class="q-num">G-2</span>Ik ben trots op wat wij als team neerzetten.</label>
        <div class="likert" id="g2">
          <input type="radio" name="g2" id="g2_1" value="1"><label for="g2_1">1<br><small>Niet</small></label>
          <input type="radio" name="g2" id="g2_2" value="2"><label for="g2_2">2</label>
          <input type="radio" name="g2" id="g2_3" value="3"><label for="g2_3">3<br><small>Soms</small></label>
          <input type="radio" name="g2" id="g2_4" value="4"><label for="g2_4">4</label>
          <input type="radio" name="g2" id="g2_5" value="5"><label for="g2_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="groep">
        <label class="qlabel"><span class="q-num">G-3</span>Ons gezamenlijk doel is helder genoeg om de huidige drukte en inspanning te rechtvaardigen.</label>
        <div class="likert" id="g3">
          <input type="radio" name="g3" id="g3_1" value="1"><label for="g3_1">1<br><small>Niet</small></label>
          <input type="radio" name="g3" id="g3_2" value="2"><label for="g3_2">2</label>
          <input type="radio" name="g3" id="g3_3" value="3"><label for="g3_3">3<br><small>Soms</small></label>
          <input type="radio" name="g3" id="g3_4" value="4"><label for="g3_4">4</label>
          <input type="radio" name="g3" id="g3_5" value="5"><label for="g3_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="groep">
        <label class="qlabel"><span class="q-num">G-4</span>We staan als team voor elkaar â€” ook als het moeilijk wordt.</label>
        <div class="likert" id="g4">
          <input type="radio" name="g4" id="g4_1" value="1"><label for="g4_1">1<br><small>Niet</small></label>
          <input type="radio" name="g4" id="g4_2" value="2"><label for="g4_2">2</label>
          <input type="radio" name="g4" id="g4_3" value="3"><label for="g4_3">3<br><small>Soms</small></label>
          <input type="radio" name="g4" id="g4_4" value="4"><label for="g4_4">4</label>
          <input type="radio" name="g4" id="g4_5" value="5"><label for="g4_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="groep">
        <label class="qlabel"><span class="q-num">G-5</span>Ik voel me echt onderdeel van dit team â€” niet alleen collega, maar teamlid.</label>
        <div class="likert" id="g5">
          <input type="radio" name="g5" id="g5_1" value="1"><label for="g5_1">1<br><small>Niet</small></label>
          <input type="radio" name="g5" id="g5_2" value="2"><label for="g5_2">2</label>
          <input type="radio" name="g5" id="g5_3" value="3"><label for="g5_3">3<br><small>Soms</small></label>
          <input type="radio" name="g5" id="g5_4" value="4"><label for="g5_4">4</label>
          <input type="radio" name="g5" id="g5_5" value="5"><label for="g5_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>

      <div class="question-item" data-q="groep">
        <label class="qlabel"><span class="q-num">G â€” Signaal</span>Wat zie jij als een belangrijk signaal rondom identificatie met de groep?</label>
        <textarea class="open-q" id="open_groep" placeholder="Bijv. iets wat je opvalt, wat goed gaat of wat ontbreekt..."></textarea>
      </div>

    </div>
  </div>

  <!-- KWADRANT 2: PERSOONLIJKE BELANGEN -->
  <div class="quadrant-section" data-q="persoonlijk">
    <div class="quadrant-header persoonlijk">
      <span class="q-icon">ðŸŽ¯</span>
      <div>
        <div class="q-title">Persoonlijke belangen</div>
        <div class="q-sub">Eigen behoeften Â· ambities Â· drijfveren Â· ruimte voor het individu</div>
      </div>
    </div>
    <div class="signal-tags persoonlijk">
      <span class="signal-tag">Erkenning</span>
      <span class="signal-tag">Eigen bijdrage zichtbaar</span>
      <span class="signal-tag">Persoonlijke groei</span>
      <span class="signal-tag">Intrinsieke motivatie</span>
    </div>
    <div class="questions-list">

      <div class="question-item" data-q="persoonlijk">
        <label class="qlabel"><span class="q-num">P-1</span>Het team helpt mij om mijn werk beter of makkelijker te doen.</label>
        <div class="likert" id="p1">
          <input type="radio" name="p1" id="p1_1" value="1"><label for="p1_1">1<br><small>Niet</small></label>
          <input type="radio" name="p1" id="p1_2" value="2"><label for="p1_2">2</label>
          <input type="radio" name="p1" id="p1_3" value="3"><label for="p1_3">3<br><small>Soms</small></label>
          <input type="radio" name="p1" id="p1_4" value="4"><label for="p1_4">4</label>
          <input type="radio" name="p1" id="p1_5" value="5"><label for="p1_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="persoonlijk">
        <label class="qlabel"><span class="q-num">P-2</span>Er wordt rekening gehouden met mijn expertise Ã©n mijn grenzen.</label>
        <div class="likert" id="p2">
          <input type="radio" name="p2" id="p2_1" value="1"><label for="p2_1">1<br><small>Niet</small></label>
          <input type="radio" name="p2" id="p2_2" value="2"><label for="p2_2">2</label>
          <input type="radio" name="p2" id="p2_3" value="3"><label for="p2_3">3<br><small>Soms</small></label>
          <input type="radio" name="p2" id="p2_4" value="4"><label for="p2_4">4</label>
          <input type="radio" name="p2" id="p2_5" value="5"><label for="p2_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="persoonlijk">
        <label class="qlabel"><span class="q-num">P-3</span>Samenwerken in dit team voelt als 'samen de last dragen' â€” niet als extra werk bovenop de stapel.</label>
        <div class="likert" id="p3">
          <input type="radio" name="p3" id="p3_1" value="1"><label for="p3_1">1<br><small>Niet</small></label>
          <input type="radio" name="p3" id="p3_2" value="2"><label for="p3_2">2</label>
          <input type="radio" name="p3" id="p3_3" value="3"><label for="p3_3">3<br><small>Soms</small></label>
          <input type="radio" name="p3" id="p3_4" value="4"><label for="p3_4">4</label>
          <input type="radio" name="p3" id="p3_5" value="5"><label for="p3_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="persoonlijk">
        <label class="qlabel"><span class="q-num">P-4</span>Mijn individuele bijdrage wordt gezien en gewaardeerd door het team.</label>
        <div class="likert" id="p4">
          <input type="radio" name="p4" id="p4_1" value="1"><label for="p4_1">1<br><small>Niet</small></label>
          <input type="radio" name="p4" id="p4_2" value="2"><label for="p4_2">2</label>
          <input type="radio" name="p4" id="p4_3" value="3"><label for="p4_3">3<br><small>Soms</small></label>
          <input type="radio" name="p4" id="p4_4" value="4"><label for="p4_4">4</label>
          <input type="radio" name="p4" id="p4_5" value="5"><label for="p4_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="persoonlijk">
        <label class="qlabel"><span class="q-num">P-5</span>Ik werk in dit team vanuit echte motivatie â€” niet alleen omdat het moet.</label>
        <div class="likert" id="p5">
          <input type="radio" name="p5" id="p5_1" value="1"><label for="p5_1">1<br><small>Niet</small></label>
          <input type="radio" name="p5" id="p5_2" value="2"><label for="p5_2">2</label>
          <input type="radio" name="p5" id="p5_3" value="3"><label for="p5_3">3<br><small>Soms</small></label>
          <input type="radio" name="p5" id="p5_4" value="4"><label for="p5_4">4</label>
          <input type="radio" name="p5" id="p5_5" value="5"><label for="p5_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>

      <div class="question-item" data-q="persoonlijk">
        <label class="qlabel"><span class="q-num">P â€” Signaal</span>Wat zie jij als een belangrijk signaal rondom persoonlijke belangen in dit team?</label>
        <textarea class="open-q" id="open_persoonlijk" placeholder="Bijv. wat jou drijft, wat ontbreekt of wat beter kan..."></textarea>
      </div>

    </div>
  </div>

  <!-- KWADRANT 3: ONDERGRENS BEWAKEN -->
  <div class="quadrant-section" data-q="ondergrens">
    <div class="quadrant-header ondergrens">
      <span class="q-icon">ðŸ›‘</span>
      <div>
        <div class="q-title">Ondergrens bewaken</div>
        <div class="q-sub">Grenzen Â· normen Â· wat niet acceptabel is Â· aanspreken</div>
      </div>
    </div>
    <div class="signal-tags ondergrens">
      <span class="signal-tag">Veilige grenzen</span>
      <span class="signal-tag">Aanspreken op gedrag</span>
      <span class="signal-tag">Normstelling</span>
      <span class="signal-tag">Consequenties</span>
    </div>
    <div class="questions-list">

      <div class="question-item" data-q="ondergrens">
        <label class="qlabel"><span class="q-num">O-1</span>We spreken elkaar aan als afspraken niet worden nagekomen.</label>
        <div class="likert" id="o1">
          <input type="radio" name="o1" id="o1_1" value="1"><label for="o1_1">1<br><small>Niet</small></label>
          <input type="radio" name="o1" id="o1_2" value="2"><label for="o1_2">2</label>
          <input type="radio" name="o1" id="o1_3" value="3"><label for="o1_3">3<br><small>Soms</small></label>
          <input type="radio" name="o1" id="o1_4" value="4"><label for="o1_4">4</label>
          <input type="radio" name="o1" id="o1_5" value="5"><label for="o1_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="ondergrens">
        <label class="qlabel"><span class="q-num">O-2</span>We durven gezamenlijk 'nee' te zeggen tegen verzoeken van buitenaf die onze kwaliteit schaden.</label>
        <div class="likert" id="o2">
          <input type="radio" name="o2" id="o2_1" value="1"><label for="o2_1">1<br><small>Niet</small></label>
          <input type="radio" name="o2" id="o2_2" value="2"><label for="o2_2">2</label>
          <input type="radio" name="o2" id="o2_3" value="3"><label for="o2_3">3<br><small>Soms</small></label>
          <input type="radio" name="o2" id="o2_4" value="4"><label for="o2_4">4</label>
          <input type="radio" name="o2" id="o2_5" value="5"><label for="o2_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="ondergrens">
        <label class="qlabel"><span class="q-num">O-3</span>Het is duidelijk wat in ons team absoluut niet acceptabel is â€” qua gedrag of werkwijze.</label>
        <div class="likert" id="o3">
          <input type="radio" name="o3" id="o3_1" value="1"><label for="o3_1">1<br><small>Niet</small></label>
          <input type="radio" name="o3" id="o3_2" value="2"><label for="o3_2">2</label>
          <input type="radio" name="o3" id="o3_3" value="3"><label for="o3_3">3<br><small>Soms</small></label>
          <input type="radio" name="o3" id="o3_4" value="4"><label for="o3_4">4</label>
          <input type="radio" name="o3" id="o3_5" value="5"><label for="o3_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="ondergrens">
        <label class="qlabel"><span class="q-num">O-4</span>Ik durf anderen in ons team aan te spreken als iets niet klopt of niet kan.</label>
        <div class="likert" id="o4">
          <input type="radio" name="o4" id="o4_1" value="1"><label for="o4_1">1<br><small>Niet</small></label>
          <input type="radio" name="o4" id="o4_2" value="2"><label for="o4_2">2</label>
          <input type="radio" name="o4" id="o4_3" value="3"><label for="o4_3">3<br><small>Soms</small></label>
          <input type="radio" name="o4" id="o4_4" value="4"><label for="o4_4">4</label>
          <input type="radio" name="o4" id="o4_5" value="5"><label for="o4_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="ondergrens">
        <label class="qlabel"><span class="q-num">O-5</span>Ik voel me veilig genoeg om mijn eigen grenzen aan te geven binnen dit team.</label>
        <div class="likert" id="o5">
          <input type="radio" name="o5" id="o5_1" value="1"><label for="o5_1">1<br><small>Niet</small></label>
          <input type="radio" name="o5" id="o5_2" value="2"><label for="o5_2">2</label>
          <input type="radio" name="o5" id="o5_3" value="3"><label for="o5_3">3<br><small>Soms</small></label>
          <input type="radio" name="o5" id="o5_4" value="4"><label for="o5_4">4</label>
          <input type="radio" name="o5" id="o5_5" value="5"><label for="o5_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>

      <div class="question-item" data-q="ondergrens">
        <label class="qlabel"><span class="q-num">O â€” Signaal</span>Welk gedrag binnen dit team kost op dit moment de meeste energie?</label>
        <textarea class="open-q" id="open_ondergrens" placeholder="Bijv. iets wat wordt vermeden, wat wel of niet wordt uitgesproken..."></textarea>
      </div>

    </div>
  </div>

  <!-- KWADRANT 4: AFHANKELIJKHEID -->
  <div class="quadrant-section" data-q="afhankelijk">
    <div class="quadrant-header afhankelijk">
      <span class="q-icon">ðŸ”—</span>
      <div>
        <div class="q-title">Afhankelijkheid van elkaar</div>
        <div class="q-sub">Wederzijdse afhankelijkheid Â· samenwerking Â· vertrouwen op elkaar</div>
      </div>
    </div>
    <div class="signal-tags afhankelijk">
      <span class="signal-tag">Samenwerking</span>
      <span class="signal-tag">Vertrouwen op elkaar</span>
      <span class="signal-tag">Complementariteit</span>
      <span class="signal-tag">Gezamenlijk resultaat</span>
    </div>
    <div class="questions-list">

      <div class="question-item" data-q="afhankelijk">
        <label class="qlabel"><span class="q-num">A-1</span>Het is duidelijk wat we van elkaar nodig hebben om succesvol te zijn.</label>
        <div class="likert" id="a1">
          <input type="radio" name="a1" id="a1_1" value="1"><label for="a1_1">1<br><small>Niet</small></label>
          <input type="radio" name="a1" id="a1_2" value="2"><label for="a1_2">2</label>
          <input type="radio" name="a1" id="a1_3" value="3"><label for="a1_3">3<br><small>Soms</small></label>
          <input type="radio" name="a1" id="a1_4" value="4"><label for="a1_4">4</label>
          <input type="radio" name="a1" id="a1_5" value="5"><label for="a1_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="afhankelijk">
        <label class="qlabel"><span class="q-num">A-2</span>We vertrouwen erop dat elk teamlid zijn deel van de keten oppakt.</label>
        <div class="likert" id="a2">
          <input type="radio" name="a2" id="a2_1" value="1"><label for="a2_1">1<br><small>Niet</small></label>
          <input type="radio" name="a2" id="a2_2" value="2"><label for="a2_2">2</label>
          <input type="radio" name="a2" id="a2_3" value="3"><label for="a2_3">3<br><small>Soms</small></label>
          <input type="radio" name="a2" id="a2_4" value="4"><label for="a2_4">4</label>
          <input type="radio" name="a2" id="a2_5" value="5"><label for="a2_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="afhankelijk">
        <label class="qlabel"><span class="q-num">A-3</span>We werken samen aan gedeelde resultaten â€” het is niet ieder voor zich.</label>
        <div class="likert" id="a3">
          <input type="radio" name="a3" id="a3_1" value="1"><label for="a3_1">1<br><small>Niet</small></label>
          <input type="radio" name="a3" id="a3_2" value="2"><label for="a3_2">2</label>
          <input type="radio" name="a3" id="a3_3" value="3"><label for="a3_3">3<br><small>Soms</small></label>
          <input type="radio" name="a3" id="a3_4" value="4"><label for="a3_4">4</label>
          <input type="radio" name="a3" id="a3_5" value="5"><label for="a3_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="afhankelijk">
        <label class="qlabel"><span class="q-num">A-4</span>Ik kan op mijn teamleden rekenen als ik hulp of input nodig heb.</label>
        <div class="likert" id="a4">
          <input type="radio" name="a4" id="a4_1" value="1"><label for="a4_1">1<br><small>Niet</small></label>
          <input type="radio" name="a4" id="a4_2" value="2"><label for="a4_2">2</label>
          <input type="radio" name="a4" id="a4_3" value="3"><label for="a4_3">3<br><small>Soms</small></label>
          <input type="radio" name="a4" id="a4_4" value="4"><label for="a4_4">4</label>
          <input type="radio" name="a4" id="a4_5" value="5"><label for="a4_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>
      <hr class="divider">

      <div class="question-item" data-q="afhankelijk">
        <label class="qlabel"><span class="q-num">A-5</span>Onze onderlinge afhankelijkheid wordt productief gemaakt â€” we benutten elkaars kracht in plaats van op overlevingsstand te werken.</label>
        <div class="likert" id="a5">
          <input type="radio" name="a5" id="a5_1" value="1"><label for="a5_1">1<br><small>Niet</small></label>
          <input type="radio" name="a5" id="a5_2" value="2"><label for="a5_2">2</label>
          <input type="radio" name="a5" id="a5_3" value="3"><label for="a5_3">3<br><small>Soms</small></label>
          <input type="radio" name="a5" id="a5_4" value="4"><label for="a5_4">4</label>
          <input type="radio" name="a5" id="a5_5" value="5"><label for="a5_5">5<br><small>Sterk</small></label>
        </div>
        <div class="likert-ends"><span>Helemaal niet</span><span>Volledig</span></div>
      </div>

      <div class="question-item" data-q="afhankelijk">
        <label class="qlabel"><span class="q-num">A â€” Signaal</span>Waar laten we als team gaten vallen door gebrek aan afstemming of samenwerking?</label>
        <textarea class="open-q" id="open_afhankelijk" placeholder="Bijv. waar het knelt, wat goed werkt, of wat jullie meer van nodig hebben..."></textarea>
      </div>

    </div>
  </div>

</div><!-- /scanForm -->

<div class="submit-area">
  <p class="submit-hint" id="submitHint"></p>
  <button class="btn-submit" onclick="submitScan()">Bekijk mijn resultaten â†’</button>
</div>

<!-- ===== RESULTS ===== -->
<div id="results">
  <div class="results-header">
    <h2>Jouw Teamsignalen</h2>
  </div>
  <p class="result-meta" id="resultMeta"></p>

  <div class="result-grid">
    <div class="result-card groep">
      <h3>ðŸ«‚ Identificatie met de groep</h3>
      <div class="score-bar-bg"><div class="score-bar-fill" id="bar-groep" style="width:0%"></div></div>
      <div><span class="score-num" id="score-groep">â€“</span> <span class="score-max">/ 5</span></div>
      <div class="attention-pill" id="badge-groep"></div>
    </div>
    <div class="result-card persoonlijk">
      <h3>ðŸŽ¯ Persoonlijke belangen</h3>
      <div class="score-bar-bg"><div class="score-bar-fill" id="bar-persoonlijk" style="width:0%"></div></div>
      <div><span class="score-num" id="score-persoonlijk">â€“</span> <span class="score-max">/ 5</span></div>
      <div class="attention-pill" id="badge-persoonlijk"></div>
    </div>
    <div class="result-card ondergrens">
      <h3>ðŸ›‘ Ondergrens bewaken</h3>
      <div class="score-bar-bg"><div class="score-bar-fill" id="bar-ondergrens" style="width:0%"></div></div>
      <div><span class="score-num" id="score-ondergrens">â€“</span> <span class="score-max">/ 5</span></div>
      <div class="attention-pill" id="badge-ondergrens"></div>
    </div>
    <div class="result-card afhankelijk">
      <h3>ðŸ”— Afhankelijkheid van elkaar</h3>
      <div class="score-bar-bg"><div class="score-bar-fill" id="bar-afhankelijk" style="width:0%"></div></div>
      <div><span class="score-num" id="score-afhankelijk">â€“</span> <span class="score-max">/ 5</span></div>
      <div class="attention-pill" id="badge-afhankelijk"></div>
    </div>
  </div>

  <div class="radar-wrap">
    <h3>Spinnenwebdiagram â€” vier kwadranten</h3>
    <canvas id="radarChart" width="300" height="300"></canvas>
  </div>

  <div class="advice-section">
    <h3>Aandachtspunten & gespreksopeners</h3>
    <div id="adviceList"></div>
  </div>

  <div class="open-section">
    <h3>Jouw kwalitatieve signalen</h3>
    <div id="openAnswers"></div>
  </div>

  <button class="btn-reset" onclick="resetScan()">â†º Opnieuw invullen</button>
</div>

<script>
// ---- PROGRESS ----
const allRadios = document.querySelectorAll('input[type="radio"]');
const TOTAL = 20;
function updateProgress() {
  const answered = new Set([...allRadios].filter(r => r.checked).map(r => r.name)).size;
  const pct = Math.round((answered / TOTAL) * 100);
  document.getElementById('progressFill').style.width = pct + '%';
  document.getElementById('progressLabel').textContent = answered + ' / ' + TOTAL + ' ingevuld';
  document.getElementById('progressBar').style.display = answered > 0 ? 'block' : 'none';
  const hint = document.getElementById('submitHint');
  const rem = TOTAL - answered;
  hint.textContent = rem > 0
    ? `Nog ${rem} vra${rem === 1 ? 'ag' : 'gen'} te beantwoorden.`
    : 'âœ“ Alle vragen zijn ingevuld â€” klaar om te bekijken!';
}
allRadios.forEach(r => r.addEventListener('change', updateProgress));

// ---- SCORES ----
function getScore(names) {
  let total = 0, count = 0;
  names.forEach(n => {
    const checked = document.querySelector(`input[name="${n}"]:checked`);
    if (checked) { total += parseInt(checked.value); count++; }
  });
  return count > 0 ? total / count : null;
}

function badge(score) {
  if (score === null) return 'â€“';
  if (score >= 4.0) return 'âœ“ Goed';
  if (score >= 2.5) return 'â—Ž Aandacht';
  return 'âš  Prioriteit';
}

// ---- ADVICE ----
const adviceData = {
  groep: [
    { range: [1, 2.4], text: 'Het wij-gevoel is zwak. Er is weinig gedeelde identiteit. Plan een teamsessie rond de vragen: "Wie zijn wij als team?" en "Wat verbindt ons?" Investeer in rituelen die het groepsgevoel versterken.' },
    { range: [2.5, 3.9], text: 'Er is een begin van groepsidentiteit, maar het kan sterker. Maak successen zichtbaar als team, introduceer gedeelde rituelen en bespreek wat jullie als team uniek maakt.' },
    { range: [4, 5], text: 'Jullie teamidentiteit is sterk. Bewaar dit door nieuwe teamleden actief te betrekken en het gezamenlijke doel levend te houden.' }
  ],
  persoonlijk: [
    { range: [1, 2.4], text: 'Persoonlijke belangen en drijfveren krijgen weinig ruimte. Dit kan leiden tot onzichtbare frustraties en motivatieverlies. Maak individuele ambities bespreekbaar â€” bijvoorbeeld via persoonlijke check-ins.' },
    { range: [2.5, 3.9], text: 'Er is enige ruimte voor het individu, maar niet structureel. Vraag regelmatig: "Wat heb jij nodig om je werk goed Ã©n met plezier te doen?" Maak erkenning een gewoonte.' },
    { range: [4, 5], text: 'Persoonlijke belangen worden goed erkend. Zorg dat dit ook standhoudt bij werkdruk of veranderingen in het team.' }
  ],
  ondergrens: [
    { range: [1, 2.4], text: 'Grenzen zijn onhelder of worden niet bewaakt. Dit is een risico voor veiligheid en vertrouwen. Start een open gesprek over: "Wat is voor ons echt onacceptabel?" en maak afspraken expliciet.' },
    { range: [2.5, 3.9], text: 'Er zijn grenzen, maar ze worden niet altijd benoemd of gehandhaafd. Oefen met aanspreken: klein beginnen bij kleine overtredingen verlaagt de drempel.' },
    { range: [4, 5], text: 'Grenzen zijn helder en worden bewaakt. Houd dit levend door normoverschrijdingen bespreekbaar te blijven maken â€” ook als het ongemakkelijk is.' }
  ],
  afhankelijk: [
    { range: [1, 2.4], text: 'Teamleden werken voornamelijk naast elkaar in plaats van mÃ©t elkaar. De onderlinge afhankelijkheid wordt niet benut. Breng in kaart wie wie nodig heeft â€” en maak dat zichtbaar.' },
    { range: [2.5, 3.9], text: 'Er is samenwerking, maar de wederzijdse afhankelijkheid wordt niet volledig benut. Bespreek: "Waar heb jij de anderen voor nodig?" Zet in op complementariteit.' },
    { range: [4, 5], text: 'Jullie benutten elkaars krachten goed. Blijf investeren in kennis van elkaars werk en kwaliteiten om dit vast te houden.' }
  ]
};

function getAdvice(q, score) {
  if (score === null) return null;
  return adviceData[q].find(a => score >= a.range[0] && score <= a.range[1]);
}

// ---- RADAR ----
function drawRadar(scores) {
  const canvas = document.getElementById('radarChart');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  const cx = W / 2, cy = H / 2;
  const maxR = Math.min(cx, cy) - 44;
  const keys = ['groep', 'persoonlijk', 'ondergrens', 'afhankelijk'];
  const labels = ['Identificatie\ngroep', 'Persoonlijke\nbelangen', 'Ondergrens\nbewaken', 'Afhankelijkheid'];
  const colors = ['#2b4162', '#7a3b1e', '#2d6a4f', '#5c3d7a'];
  const n = 4;
  const angles = keys.map((_, i) => (Math.PI * 2 / n) * i - Math.PI / 2);

  ctx.clearRect(0, 0, W, H);

  // grid rings
  for (let r = 1; r <= 5; r++) {
    ctx.beginPath();
    angles.forEach((a, i) => {
      const x = cx + Math.cos(a) * (maxR * r / 5);
      const y = cy + Math.sin(a) * (maxR * r / 5);
      i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
    });
    ctx.closePath();
    ctx.strokeStyle = r === 5 ? '#d0ccc0' : '#e8e4db';
    ctx.lineWidth = 1;
    ctx.stroke();
  }

  // axes
  angles.forEach(a => {
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(cx + Math.cos(a) * maxR, cy + Math.sin(a) * maxR);
    ctx.strokeStyle = '#ddd8cc';
    ctx.lineWidth = 1;
    ctx.stroke();
  });

  // data polygon
  ctx.beginPath();
  keys.forEach((k, i) => {
    const v = scores[k] / 5;
    const x = cx + Math.cos(angles[i]) * maxR * v;
    const y = cy + Math.sin(angles[i]) * maxR * v;
    i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
  });
  ctx.closePath();
  ctx.fillStyle = 'rgba(28, 23, 20, 0.10)';
  ctx.fill();
  ctx.strokeStyle = '#1a1714';
  ctx.lineWidth = 2.5;
  ctx.stroke();

  // dots
  keys.forEach((k, i) => {
    const v = scores[k] / 5;
    const x = cx + Math.cos(angles[i]) * maxR * v;
    const y = cy + Math.sin(angles[i]) * maxR * v;
    ctx.beginPath();
    ctx.arc(x, y, 5, 0, Math.PI * 2);
    ctx.fillStyle = colors[i];
    ctx.fill();
  });

  // labels
  ctx.textAlign = 'center';
  keys.forEach((k, i) => {
    const labelLines = labels[i].split('\n');
    const lx = cx + Math.cos(angles[i]) * (maxR + 28);
    const ly = cy + Math.sin(angles[i]) * (maxR + 28);
    ctx.fillStyle = colors[i];
    ctx.font = '600 11px Outfit, sans-serif';
    const lineH = 14;
    const startY = ly - ((labelLines.length - 1) * lineH) / 2;
    labelLines.forEach((line, li) => ctx.fillText(line, lx, startY + li * lineH));
  });

  // score dots labels
  ctx.font = 'bold 11px Outfit, sans-serif';
  keys.forEach((k, i) => {
    const v = scores[k] / 5;
    const x = cx + Math.cos(angles[i]) * maxR * v;
    const y = cy + Math.sin(angles[i]) * maxR * v;
    const offX = Math.cos(angles[i]) < -0.1 ? -13 : 13;
    const offY = Math.sin(angles[i]) < -0.1 ? -10 : 13;
    ctx.fillStyle = '#1a1714';
    ctx.fillText(scores[k].toFixed(1), x + offX, y + offY);
  });
}

// ---- SUBMIT ----
function submitScan() {
  const scores = {
    groep:       getScore(['g1','g2','g3','g4','g5']),
    persoonlijk: getScore(['p1','p2','p3','p4','p5']),
    ondergrens:  getScore(['o1','o2','o3','o4','o5']),
    afhankelijk: getScore(['a1','a2','a3','a4','a5'])
  };

  if (Object.values(scores).some(v => v === null)) {
    alert('Vul alstublieft alle 20 stellingen in voordat je de resultaten bekijkt.');
    return;
  }

  // meta
  const name = document.getElementById('name').value || 'Anoniem';
  const team = document.getElementById('team').value;
  const date = document.getElementById('scandate').value
    ? new Date(document.getElementById('scandate').value).toLocaleDateString('nl-NL')
    : new Date().toLocaleDateString('nl-NL');
  document.getElementById('resultMeta').textContent =
    `${name}${team ? ' Â· ' + team : ''} Â· ${date}`;

  // score cards
  const labels = { groep: 'ðŸ«‚ Identificatie met de groep', persoonlijk: 'ðŸŽ¯ Persoonlijke belangen', ondergrens: 'ðŸ›‘ Ondergrens bewaken', afhankelijk: 'ðŸ”— Afhankelijkheid van elkaar' };
  Object.keys(scores).forEach(q => {
    const s = scores[q];
    document.getElementById('score-' + q).textContent = s.toFixed(1);
    setTimeout(() => {
      document.getElementById('bar-' + q).style.width = ((s / 5) * 100) + '%';
    }, 100);
    document.getElementById('badge-' + q).textContent = badge(s);
  });

  // advice
  const adviceList = document.getElementById('adviceList');
  adviceList.innerHTML = '';
  // sort by score ascending (most critical first)
  const sorted = Object.keys(scores).sort((a, b) => scores[a] - scores[b]);
  sorted.forEach(q => {
    const a = getAdvice(q, scores[q]);
    if (!a) return;
    const div = document.createElement('div');
    div.className = 'advice-item ' + q;
    div.innerHTML = `<strong>${labels[q]} â€” score ${scores[q].toFixed(1)}</strong>${a.text}`;
    adviceList.appendChild(div);
  });

  // open answers
  const opens = [
    { key: 'open_groep', label: 'ðŸ«‚ Identificatie met de groep' },
    { key: 'open_persoonlijk', label: 'ðŸŽ¯ Persoonlijke belangen' },
    { key: 'open_ondergrens', label: 'ðŸ›‘ Ondergrens bewaken' },
    { key: 'open_afhankelijk', label: 'ðŸ”— Afhankelijkheid van elkaar' },
  ];
  const openAnswers = document.getElementById('openAnswers');
  openAnswers.innerHTML = '';
  opens.forEach(o => {
    const val = document.getElementById(o.key).value.trim();
    const div = document.createElement('div');
    div.className = 'open-answer';
    div.innerHTML = `<strong>${o.label}</strong><p${val ? '' : ' class="empty"'}>${val || 'Geen toelichting ingevuld.'}</p>`;
    openAnswers.appendChild(div);
  });

  // radar
  drawRadar(scores);

  // show results
  document.getElementById('scanForm').style.display = 'none';
  document.querySelectorAll('.meta-section, .model-intro, .submit-area').forEach(el => el.style.display = 'none');
  document.getElementById('results').style.display = 'block';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function resetScan() {
  document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
  document.querySelectorAll('textarea').forEach(t => t.value = '');
  document.getElementById('results').style.display = 'none';
  document.getElementById('scanForm').style.display = 'block';
  document.querySelectorAll('.meta-section, .model-intro, .submit-area').forEach(el => el.style.display = '');
  updateProgress();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// default date
document.getElementById('scandate').value = new Date().toISOString().split('T')[0];
</script>
</body>
</html>
